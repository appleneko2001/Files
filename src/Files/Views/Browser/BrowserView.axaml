<ResourceDictionary xmlns="https://github.com/avaloniaui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    
                    xmlns:viewModel="clr-namespace:Files.Views.Models.Browser"
                    xmlns:icons="clr-namespace:Material.Icons.Avalonia;assembly=Material.Icons.Avalonia"
                    xmlns:assists="clr-namespace:Material.Styles.Assists;assembly=Material.Styles"
                    xmlns:viewModel1="clr-namespace:Files.Views.Models"
                    xmlns:local="clr-namespace:Files.Views.Models.Browser.Files.Local"

                    x:Class="Files.Views.Browser.BrowserView">
    <RecyclePool x:Key="BrowserItemRecyclePool"/>
    
    <RecyclingElementFactory x:Key="BrowserViewGridItemTemplate"
                             RecyclePool="{StaticResource BrowserItemRecyclePool}"
                             SelectTemplateKey="OnSelectTemplateKeyForBrowserViewGridItem">
        <RecyclingElementFactory.Templates>
            <DataTemplate DataType="local:FileItemViewModel" x:Key="File">
                <Button Classes="Flat" Margin="0" Padding="0"
                        HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                        
                        Foreground="{DynamicResource PrimaryHueDarkBrush}">
                    <DockPanel Margin="8"
                               LastChildFill="True"
                               
                               Opacity="{CompiledBinding IsVisible, 
                               Converter={StaticResource BoolToDoubleConverter}, 
                               ConverterParameter={StaticResource IsNotVisibleDoubleValue}}">
                        <Panel Width="48" Height="48"
                               VerticalAlignment="Top"
                               DockPanel.Dock="Left">
                            <icons:MaterialIcon Width="NaN" Height="NaN"
                                                   
                                                   Kind="File" 
                                                   VerticalAlignment="Stretch" 
                                                   HorizontalAlignment="Stretch"/>
                            
                            <ContentControl Content="{CompiledBinding AdditionalIconKind}"
                                            ContentTemplate="{StaticResource BrowserItemDecorationTemplate}"/>
                        </Panel>
                        
                        <StackPanel Margin="8,0" DockPanel.Dock="Right">
                            <StackPanel.Styles>
                                <Style Selector="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Stretch"/>
                                    <Setter Property="VerticalAlignment" Value="Stretch"/>
                                    <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
                                    <Setter Property="TextWrapping" Value="NoWrap"/>
                                    <Setter Property="TextAlignment" Value="Left"/>
                                </Style>
                            </StackPanel.Styles>
                            
                            <TextBlock Text="{CompiledBinding DisplayName}"/>
                            <TextBlock Text="{CompiledBinding Size}"/>
                        </StackPanel>
                    </DockPanel>
                </Button>
            </DataTemplate>
            
            <DataTemplate DataType="local:FolderItemViewModel" x:Key="Folder">
                <Button Classes="Flat" Margin="0" Padding="0"
                        HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                        
                        Command="{CompiledBinding OnClickCommand}" 
                        CommandParameter="{CompiledBinding }"
                        
                        Foreground="{DynamicResource PrimaryHueDarkBrush}">
                    <DockPanel Margin="8"
                               LastChildFill="True"
                               
                               Opacity="{CompiledBinding IsVisible, 
                               Converter={StaticResource BoolToDoubleConverter}, 
                               ConverterParameter={StaticResource IsNotVisibleDoubleValue}}">
                        <Panel Width="48" Height="48"
                               VerticalAlignment="Top"
                               DockPanel.Dock="Left">
                            <icons:MaterialIcon Width="NaN" Height="NaN"
                                                   
                                                   Kind="Folder" 
                                                   VerticalAlignment="Stretch" 
                                                   HorizontalAlignment="Stretch"/>
                            
                            <ContentControl Content="{CompiledBinding AdditionalIconKind}"
                                            ContentTemplate="{StaticResource BrowserItemDecorationTemplate}"/>
                        </Panel>
                        
                        <StackPanel Margin="8,0" DockPanel.Dock="Right">
                            <StackPanel.Styles>
                                <Style Selector="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Stretch"/>
                                    <Setter Property="VerticalAlignment" Value="Stretch"/>
                                    <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
                                    <Setter Property="TextWrapping" Value="NoWrap"/>
                                    <Setter Property="TextAlignment" Value="Left"/>
                                </Style>
                            </StackPanel.Styles>
                            
                            <TextBlock Text="{CompiledBinding DisplayName}"/>
                        </StackPanel>
                    </DockPanel>
                </Button>
            </DataTemplate>
        </RecyclingElementFactory.Templates>
    </RecyclingElementFactory>
    
    <RecyclingElementFactory x:Key="BrowserViewTemplate">
        <RecyclingElementFactory.Templates>
            <DataTemplate DataType="viewModel:LocalFilesBrowserContentViewModel" x:Key="GridView">
                <ItemsRepeater Items="{CompiledBinding Content}"
                               VerticalCacheLength="2" HorizontalCacheLength="2" Margin="16"
                               ItemTemplate="{StaticResource BrowserViewGridItemTemplate}">
                    <ItemsRepeater.Layout>
                        <UniformGridLayout ItemsJustification="Start" ItemsStretch="Fill"
                                           MinColumnSpacing="16" MinRowSpacing="16" MinItemWidth="240" MinItemHeight="64"/>
                    </ItemsRepeater.Layout>
                </ItemsRepeater>
            </DataTemplate>
        </RecyclingElementFactory.Templates>
    </RecyclingElementFactory>
</ResourceDictionary>